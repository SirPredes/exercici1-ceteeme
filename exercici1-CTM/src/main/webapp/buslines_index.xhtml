<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Gestió de Línies de Autobús</title>
</h:head>

<h:body>

    <h:form id="headerForm">
        <p:menubar>
            <p:graphicImage name="exercici1-CTM/bus.jpg" width="40" style="margin-right:10px"/>
            <p:menuitem value="Línies de Bus" outcome="buslines_index.xhtml" icon="pi pi-bus"/>
            <p:menuitem value="Avisos i Alertes" outcome="alerts.xhtml" icon="pi pi-exclamation-triangle"/>
        </p:menubar>
    </h:form>

    <h:form id="mainForm">

        <h2>Llistat de Línies de Autobús</h2>

        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="margin-bottom:10px">
            <p:outputLabel for="rowsPerPage" value="Mostrar:" />
            <p:selectOneMenu id="rowsPerPage" value="#{BuslineBean.rows}" style="width:100px">
                <f:selectItem itemLabel="20" itemValue="20" />
                <f:selectItem itemLabel="50" itemValue="50" />
                <f:selectItem itemLabel="Totes" itemValue="#{BuslineBean.buslines.size()}" />
                <p:ajax update="buslineTable" />
            </p:selectOneMenu>
        </p:panelGrid>

        <p:dataTable id="buslineTable" value="#{BuslineBean.buslines}" var="line"
                     paginator="true" rows="#{BuslineBean.rows}" responsiveLayout="scroll">

            <p:column headerText="Nº">
                #{line.buslineId.value}
            </p:column>
            <p:column headerText="Nom">
                #{line.name}
            </p:column>
            <p:column headerText="Orígen">
                #{line.origin}
            </p:column>
            <p:column headerText="Destí">
                #{line.destination}
            </p:column>
            <p:column headerText="Tipus">
                #{line.busType}
            </p:column>
        </p:dataTable>

        <h2 style="margin-top:40px">Crear Nova Línea</h2>

        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">

            <p:outputLabel for="lineId" value="ID Línea:" />
            <p:inputText id="lineId" value="#{BuslineBean.lineId}" required="true"/>

            <p:outputLabel for="name" value="Nom:" />
            <p:inputText id="name" value="#{BuslineBean.name}" required="true"/>

            <p:outputLabel for="origin" value="Orígen:" />
            <p:inputText id="origin" value="#{BuslineBean.origin}" required="true"/>

            <p:outputLabel for="destination" value="Destí:" />
            <p:inputText id="destination" value="#{BuslineBean.destination}" required="true"/>

            <p:outputLabel for="busType" value="Tipus de Bus:" />
            <p:selectOneMenu id="busType" value="#{BuslineBean.busType}">
                <f:selectItem itemLabel="Selecciona una" itemValue="#{null}" />
                <f:selectItems value="#{BusType.values()}" var="type"
                               itemLabel="#{type}" itemValue="#{type}" />
            </p:selectOneMenu>

        </p:panelGrid>

        <p:commandButton value="Crear Línea" action="#{BuslineBean.createBusline}"
                         update="@form" icon="pi pi-plus" style="margin-top">

        </p:commandButton>